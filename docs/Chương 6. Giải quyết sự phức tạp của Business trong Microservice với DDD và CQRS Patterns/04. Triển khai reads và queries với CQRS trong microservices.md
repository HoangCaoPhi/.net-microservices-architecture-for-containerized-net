Để reads/queries, ordering microservice từ ứng dụng eShopOnContainers triển khai queries độc lập với DDD model và transactional. Việc triển khai này cần thiết bởi vì yêu cầu queries và transactions rất khác nhau. 

Khi thực thi các transactions cho hoạt động "write" phải tuân thủ những ràng buộc của domain logic. Mặt khác, "query" là những idempotent có thể tách biệt những quy tắc của domain logic.

Cách tiếp cận này đơn giản, như ở hình 7-3 phía dưới. API interface được triển khai bởi Web API controllers bằng cách sử dụng bất kì infrastructure nào, ví dụ như là micro ORM như Dapper, và trả về ViewModels dynamic tùy thuộc vào nhu cầu của UI app.

![image.png](https://learn.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/media/cqrs-microservice-reads/simple-approach-cqrs-queries.png)

Hình 7-3. Cách tiếp cận đơn giản của queries trong một CQRS microservice

Cách tiếp cận query-side là idempotent, chúng không thay đổi trạng thái của hệ thống hay dữ liệu được lưu trên cơ sở dữ liệu dùng query bao nhiêu lần đi chăng nữa. Vì vậy, bạn không cần ràng buộc bởi bất kỳ DDD pattern nào sử dụng trong một transaction, và đó là lý do tại sao queries được tách biệt khỏi những transaction.




